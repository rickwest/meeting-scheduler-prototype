<script type="text/javascript">
    $(document).ready(function () {
        $('.add-another-attendee-widget').click(function (e) {
            var attendeeList = $($(this).attr('data-list'));
            // Try to find the counter of the list or use the length of the list
            var attendeeCounter = attendeeList.data('attendee-widget-counter') | attendeeList.children().length;

            // grab the prototype template
            var newAttendeeWidget = attendeeList.attr('data-prototype');
            // replace the "__name__" used in the id and name of the prototype
            // with a number that's unique to your emails
            // end name attribute looks like name="contact[emails][2]"
            newAttendeeWidget = newAttendeeWidget.replace(/__name__/g, attendeeCounter);
            // Increase the counter
            attendeeCounter++;
            // And store it, the length cannot be used if deleting widgets is allowed
            attendeeList.data('attendee-widget-counter', attendeeCounter);

            // create a new list element and add it to the list
            var newAttendeeElem = $(attendeeList.attr('data-widget-tags')).html(newAttendeeWidget);
            newAttendeeElem.appendTo(attendeeList);
        });

        $('.add-another-slot-widget').click(function (e) {
            var slotList = $($(this).attr('data-list'));
            var slotCounter = slotList.data('slot-widget-counter') | slotList.children().length;

            var newSlotWidget = slotList.attr('data-prototype');
            newSlotWidget = newSlotWidget.replace(/__name__/g, slotCounter);

            slotCounter++;
            slotList.data('slot-widget-counter', slotCounter);

            var newslotElem = $(slotList.attr('data-widget-tags')).html(newSlotWidget);
            newslotElem.appendTo(slotList);
        });
    });

    function deleteAttendee(index) {
        $('#attendee-row-' + index).parent().remove();
    }
    
    function deleteSlot(index) {
        $('#slot-row-' + index).parent().remove();
    }
</script>
