<script type="text/javascript">
    $(document).ready(function () {
        $('.add-another-participant-widget').click(function (e) {
            var participantList = $($(this).attr('data-list'));
            // Try to find the counter of the list or use the length of the list
            var participantCounter = participantList.data('participant-widget-counter') | participantList.children().length;

            // grab the prototype template
            var newParticipantWidget = participantList.attr('data-prototype');
            // replace the "__name__" used in the id and name of the prototype
            // with a number that's unique to your emails
            // end name attribute looks like name="contact[emails][2]"
            newParticipantWidget = newParticipantWidget.replace(/__name__/g, participantCounter);
            // Increase the counter
            participantCounter++;
            // And store it, the length cannot be used if deleting widgets is allowed
            participantList.data('participant-widget-counter', participantCounter);

            // create a new list element and add it to the list
            var newParticipantElem = $(participantList.attr('data-widget-tags')).html(newParticipantWidget);
            newParticipantElem.appendTo(participantList);
        });

        $('.add-another-slot-widget').click(function (e) {
            var slotList = $($(this).attr('data-list'));
            var slotCounter = slotList.data('slot-widget-counter') | slotList.children().length;

            var newSlotWidget = slotList.attr('data-prototype');
            newSlotWidget = newSlotWidget.replace(/__name__/g, slotCounter);

            slotCounter++;
            slotList.data('slot-widget-counter', slotCounter);

            var newslotElem = $(slotList.attr('data-widget-tags')).html(newSlotWidget);
            newslotElem.appendTo(slotList);
        });
    });

    function deleteParticipant(index) {
        $('#participant-row-' + index).parent().remove();
    }
    
    function deleteSlot(index) {
        $('#slot-row-' + index).parent().remove();
    }
</script>
